# [Руководство по стилю](https://google.github.io/styleguide/)

# Стили Go кода

Ссылка на оригинальную статью: [https://google.github.io/styleguide/go/decisions](https://google.github.io/styleguide/go/decisions)

[Обзор](https://google.github.io/styleguide/go/index) | [Руководство](https://google.github.io/styleguide/go/guide) | [Решения](https://google.github.io/styleguide/go/decisions) | [Лучшие практики](https://google.github.io/styleguide/go/best-practices)

> Это часть серии документов, описывающих [стиль Go](https://google.github.io/styleguide/go/index) в Google. Этот документ является **[нормативным](https://google.github.io/styleguide/go/index#normative), но не [каноническим](https://google.github.io/styleguide/go/index#canonical)** и подчиняется основному [руководству по стилю](https://google.github.io/styleguide/go/guide). Пожалуйста, см. [обзор](https://google.github.io/styleguide/go/index#about) для получения дополнительной информации.

## О статье

Этот документ содержит решения о стиле, предназначенные для единообразия и стандартизации руководства, объяснений и примеров для консультаций, предоставляемых разработчиками читаемости в Go.

Документ не является **исчерпывающим** и будет развиваться со временем. В случаях, когда [основное руководство по стилю](https://google.github.io/styleguide/go/guide) противоречит рекомендациям, предоставленным здесь, **стилевой руководник имеет приоритет**, и этот документ должен быть обновлен в соответствии с этим.

Пожалуйста, см. [Обзор](https://google.github.io/styleguide/go#about) для полного набора документов о стиле Go.

Следующие разделы были перенесены из решений о стиле в другую часть руководства:

* **Форматирование**: см. [руководство#форматирование](https://google.github.io/styleguide/go/guide#formatting)
* **MixedCaps**: см. [руководство#midxed-caps](https://google.github.io/styleguide/go/guide#mixed-caps)
* **Длина линии**: см. [руководство#длина-линии](https://google.github.io/styleguide/go/guide#line-length)

## Названия
Итак, существует несколько правил по именованию в языке Go. Внимание к разделу о наименованиях в рамках [руководства по стилю](https://google.github.io/styleguide/go/guide#naming) для получения общей информации о выборе подходящих имен. Далее в разделах даются более подробные пояснения по конкретным областям, связанным с именованием.

### Подчеркивания
В целом, имена в Go не должны содержать подчеркивания. Однако есть три исключения к этому правилу:

1. Имена пакетов, которые импортируются только сгенерированным кодом, могут содержать подчеркивания. Для получения дополнительной информации об выборе имен пакетов из нескольких слов, можно обратиться к [разделу о именах пакетов](https://google.github.io/styleguide/go/decisions#package-names).
2. Имена функций Test, Benchmark и Example в файлах *_test.go могут содержать подчеркивания.
3. Низкоуровневые библиотеки, взаимодействующие с операционной системой или cgo, могут повторно использовать идентификаторы, как это делается в пакете [`syscall`](https://pkg.go.dev/syscall#pkg-constants). Однако в большинстве кодовых баз такое использование подчеркиваний будет очень редким.

### Названия пакетов

Мы ожидаем, что имена пакетов в Go будут короткими и содержать только строчные буквы. Имя пакета, состоящее из нескольких слов, должно быть написано в нижнем регистре без пробелов или подчёркиваний. Например, пакет с именем [`tabwriter`](https://pkg.go.dev/text/tabwriter) должен называться именно так, а не `tabWriter`, `TabWriter` или `tab_writer`.

Старайся избегать выбора таких имен пакетов, которые могут быть [вытеснены](https://google.github.io/styleguide/go/best-practices#shadowing) обычно используемыми именами локальных переменных. Например, `usercount` - более подходящее имя пакета, чем `count`, так как `count` является общеиспользуемым именем переменной.

Имена пакетов в Go не должны содержать подчёркивания. Если тебе нужно импортировать пакет, имя которого содержит подчёркивание (обычно это происходит из сгенерированного или стороннего кода), то это имя должно быть переименовано при импорте в имя, подходящее для использования в коде на Go.

Одно исключение из этого правила – имена пакетов, которые импортируются только сгенерированным кодом, могут содержать подчёркивания. Конкретные примеры использования подчёркивания включают:

* Использование суффикса _test для внешнего тестового пакета, например, для интеграционного тестирования.
* Использование суффикса _test для примеров [документации на уровне пакета](https://go.dev/blog/examples).

Не рекомендуется использовать неинформативные имена пакетов, такие как `util`, `utility`, `common`, `helper` и так далее. Более подробно об этом можно прочитать в статье ["utility packages"](https://google.github.io/styleguide/go/best-practices#util-packages) на блоге Go.

Когда импортируемый пакет переименовывается (например, `import foopb "path/to/foo_go_proto"`), локальное имя для пакета должно соответствовать вышеуказанным правилам, так как это локальное имя определяет, как ссылаться на символы в пакете внутри файла. Если один и тот же импорт пакета переименовывается в нескольких файлах, особенно в одном или близлежащих пакетах, следует использовать одно и то же локальное имя для достижения согласованности.

А вот ссылка на замечательную [статью в блоге Go о наименованиях пакетов](https://go.dev/blog/package-names).

### Названия получателей

Имена [переменных-получателей](https://golang.org/ref/spec#Method_declarations) должны быть:

* Короткими (обычно длиной в одну или две буквы)
* Сокращеними для самого типа
* Применяться последовательно к каждому приемнику этого типа

| Длинное название  | Лучше назвать |
| ------------- | ------------- |
| `func (tray Tray)`  | `func (t Tray)`  |
| `func (info *ResearchInfo)`  | `func (ri *ResearchInfo)`  |
| `func (this *ReportWriter)`  | `func (w *ReportWriter)`  |
| `func (self *Scanner)`  | `func (s *Scanner)`  |

### Имена констант

Имена констант должны использовать [MixedCaps](https://google.github.io/styleguide/go/guide#mixed-caps), как и все другие имена в Go. ([Экспортируемые](https://tour.golang.org/basics/3) константы начинаются с заглавной буквы, а неэкспортируемые константы начинаются с маленькой буквы.) Это относится даже тогда, когда это нарушает соглашения в других языках. Имена констант не должны быть производными от их значений, а должны объяснять, что это значение обозначает.

```
// Хорошо:
const MaxPacketSize = 512

const (
    ExecuteBit = 1 << iota
    WriteBit
    ReadBit
)
```
Старайтесь не использовать имена констант без MixedCaps и константы с префиксом `K`.
```
// Плохо:
const MAX_PACKET_SIZE = 512
const kMaxBufferSize = 1024
const KMaxUsersPergroup = 500
```
Давайте именовать константы на основе их роли, а не их значений. Если константа не имеет роли помимо своего значения, то нет необходимости определять ее как константу.
```
// Bad:
const Twelve = 12

const (
    UserNameColumn = "username"
    GroupColumn    = "group"
)
```

### Аббревиатуры

Слова в именах, которые являются инициалами или акронимами (например, `URL` и `NATO`), должны быть написаны с использованием одинакового регистра. `URL` должно появляться как `URL` или `url` (как в `urlPony` или `URLPony`), но никогда не как `Url`. То же самое относится к `ID`, когда это сокращение от "identifier"; используйте `appID` вместо `appId`.

* В именах с несколькими аббревиатурами (например, `XMLAPI`, поскольку она содержит `XML` и `API`), каждая буква в данной аббревиатуре должна быть в одинаковом регистре, но каждый инициал в имени не обязательно должен иметь одинаковый регистр.
* В именах с аббревиатурой, содержащей строчную букву (например, `DDoS`, `iOS`, `gRPC`), аббревиатура должна появляться так же, как в стандартном тексте, за исключением того случая, когда вам нужно изменить первую букву в целях [экспортирования](https://golang.org/ref/spec#Exported_identifiers). В таких случаях вся аббревиатура должна иметь одинаковый регистр (например, `ddos`, `IOS`, `GRPC`).

| Аббревиатура | Доступность | Правильно | Неправильно |
| ------------- | ------------- | ------------- | ------------- |
| XML API | Exported | `XMLAPI` | `XmlApi`, `XMLApi`, `XmlAPI`, `XMLapi` |
| XML API | Unexported | `xmlAPI` | `xmlapi`, `xmlApi` |
| iOS | Exported | `IOS` | `Ios`, `IoS` |
| iOS | Unexported | `iOS` | `ios` |
| gRPC | Exported | `GRPC` | `Grpc` |
| gRPC | Unexported | `gRPC` | `grpc` |
| DDoS | Exported | `DDoS` | `DDOS`, `Ddos` |
| DDoS | Unexported | `ddos` | `dDoS`, `dDOS` |

### Геттеры

Названия функций и методов не должны использовать префикс `Get` или `get`, если базовая концепция не использует слово "get" (например, HTTP GET). Предпочтительнее начинать название прямо с существительного, например, использовать `Counts` вместо `GetCounts`.

Если функция включает выполнение сложных вычислений или вызов удаленного сервера, можно использовать другое слово, например `Compute` (вычисление) или `Fetch` (получение), чтобы ясно указать читателю, что вызов функции может занять время, блокироваться или завершиться неудачей.

### Названия переменных


